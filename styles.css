/* Anotaciones generales al final de esta página */

:root {
    --bg-page: #e9e9e9;
    --text-main: #1e293b;
    --bg-nav: #182d55;
    --text-nav: #FFFFFF;
    --bg-nav-hover: #1e40af;
    --focus-inset-light: rgba(255, 255, 255, 0.4); /* Para un box-shadow de foco en pantallas pequeñas, usado más adelante */
    --focus-color: #1e40af;
    --focus-ring-light: rgba(30, 64, 175, 0.35);
    --focus-ring-dark: rgba(147, 197, 253, 0.45);
    --table-border: #000;
    --table-row-alt: rgba(0, 0, 0, 0.04);
    --table-row-hover: rgba(30, 64, 175, 0.08);/* Estas dos últimas variables no serían realmente neccesarias, puesto que no espero reutilizarlas en el futuro, pero me parece una buena práctica para mantener cierta coherencia interna */
}

/* Evito sumar anchos al 100% especificado. Los tres selectores me aseguran que se aplica a toda la página y a los pseudoelementos */
*, *::before, *::after {
    box-sizing: border-box;
}

/* Evita scroll horizontal indeseado en móvil al abrir la página*/
html {
    max-width: 100%;
}

/* Enlaces en modo claro */
a {
    color: blue;
    transition: color 0.3s ease;
}

a:visited { color: purple; }

a:hover,
a:focus     { color: red; }
a:active { color: green; }

/* Pequeña excepción (más especificidad) para que los enlaces de nav no cambien de color, dando aspecto de botón real, y no simples enlaces */
.nav1 a:link,
.nav1 a:visited {
    color: var(--text-nav);
}

/* Enlaces en modo oscuro */
@media (prefers-color-scheme: dark) {
    a:link { color: lightblue; }
    a:visited { color: violet; }
    a:hover, a:focus { color: orange; }
    a:active { color: green; }
}

ul {
    list-style-type: none;
    margin: 0;
    padding: 0;
}

@media (prefers-color-scheme: dark) { /* Modo oscuro */
  :root {
    --bg-page: #070b14;
    --text-main: #f8fafc;
    --table-row-alt: rgba(255, 255, 255, 0.05);
    --table-row-hover: rgba(147, 197, 253, 0.12);/* Estas dos últimas variables no serían realmente neccesarias, puesto que no espero reutilizarlas en el futuro, pero me parece una buena práctica para mantener cierta coherencia interna */
  }
}

body {
    margin: 0;
    padding: 10px;
    font-family: 'Atkinson Hyperlegible', Calibri, Arial, sans-serif;
    text-align: justify;
    background-color: var(--bg-page);
    color: var(--text-main);
    transition: background-color 0.3s ease, color 0.3s ease;
    display: grid;
    min-height: 100vh;
    grid-template-columns: 150px 1fr 210px;
    grid-template-rows: auto 1fr auto; 
    align-content: start;
    gap: 20px;
    overflow: auto; /* Hará que los scrolls de ambos ejes aparezcan solo cuando sean necesarios */
    
}

.privacy { /* Clase específica para la página de política de privacidad */
    display: block; /* Evita que herede el display grid del body */
    text-align: justify;
    max-width: 800px;
}

header {
    grid-column: 1 / 4;
    grid-row: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding-bottom: 0;
    margin-bottom: 0;
}

#titulo {
    font-size: 2em;
    font-weight: bold;
    text-transform: uppercase;
    color: var(--text-main);
    transition: color 0.3s ease; /* Todo transicionaba correctamente entre modos de color menos esto */
}

.btn {
    display: inline-flex; /* Posteriores reglas, como la de la línea 148, ya se encargan de esto, pero prefiero dejarlo así por si más adelante añado contenido más complejo aquí dentro */
    align-items: center;
    justify-content: center;
    padding: 10px 20px; /* Aumento del padding para mejorar la usabilidad en pantallas táctiles */
    border-radius: 8px;
    font-family: inherit;
    font-size: 0.95em;
    font-weight: bold;
    text-decoration: none;
    border: 2px solid var(--bg-nav);
    background-color: var(--bg-nav);
    color: var(--text-nav);
    cursor: pointer;
    white-space: nowrap;
    transition: background-color 0.3s ease,
                border-color 0.3s ease,
                transform 0.3s ease,
                box-shadow 0.2s ease;
}

.btn:hover {
    background-color: var(--bg-nav-hover);
    border-color: var(--focus-inset-light);
}

.btn:active {
    transform: translateY(2px); /* Un bonito efecto de pulsación */
}

.btn:focus-visible { /* Muestra el foco solo a usuarios de teclado */
    box-shadow: 0 0 0 2px var(--focus-inset-light) inset; /* box-shadow en lugar de outline para que forme parte del box model; me permite respetar los bordes y que se vea igual en todos los navegadores */
}

.nav1 {
    grid-column: 1;
    grid-row: 2;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.nav1 a {
    display: block; /* Mejora la pulsación en móviles al convertir el enlace en una superficie completa, y no solo el texto */
    text-decoration: none;
}

.nav1 a.active { /* Añadiendo la clase .active controlo la respuesta de ese botón según la página, y facilito que se vea mejor en móviles */
    background-color: var(--bg-nav-hover);
    border-color: var(--focus-inset-light);
}

.nav1 a:focus-visible { /* Mejora la accesibilidad para usuarios de teclado */
    box-shadow: 0 0 0 2px #ffffff inset;
}

main {
    grid-column: 2;
    grid-row: 2;
}

main a { /* Mejora la pulsación en móviles */
    padding: 4px 2px;
    display: inline-block;
    color: inherit; /* Llegar a esto para que no cambiara los colores me ha costado 2 horas */
}

@media (prefers-color-scheme: dark) { /* Ajuste para enlaces en modo oscuro */
    main a {
        color: #93c5fd;
    }

    main a:hover,
    main a:focus {
        color: #fbbf24;
    }
}

main img { /* Para evitar el desbordamiento en móviles */
    max-width: 100%;
    height: auto; /* Se escala la imagen sin romper el mapa de index.html */
}

.aside1 {
    grid-column: 3;
    grid-row: 2;
    padding: 15px;
    border-radius: 8px;
    background-color: var(--bg-nav);
    color: var(--text-nav);
    border: 2px solid var(--bg-nav);
    align-self: start; 
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.aside1 a { /* Mejora la pulsación en móviles */
    display: block;
    padding: 6px 4px;
}

.aside1 h4 {
    margin-top: 0;
    text-align: center;
    margin-bottom: 10px;
    width: 100%;
}

/* Enlaces del aside (estilo general pero con contraste para el fondo azul oscuro) */
.aside1 a:link { color: #93c5fd; }
.aside1 a:visited { color: #c4b5fd; }

.aside1 a:hover,
.aside1 a:focus { color: #f87171; }
.aside1 a:active { color: #4ade80; }

footer {
    grid-column: 1 / 4;
    grid-row: 3;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px;
    font-size: 0.9em;
}

.foot-name {
    text-align: left;
}

.foot-icons {
    display: flex;
    gap: 8px;
    align-items: center;
}

/* Estilos para el desbordamiento de tablas */
.table-wrapper {
    width: 100%;
    overflow-x: auto;
    padding: 6px;
    border: 1px solid var(--table-border);
    border-radius: 6px;
}

/* Estilos de tablas */
.comp-table {
    width: 100%;
    border-collapse: separate; /* Efecto de espacio entre celdas en lugar de usar el obsoleto border=1 */
    border-spacing: 0 1px;
    font-size: 0.95em;
}

.comp-table caption {
    caption-side: top;
    font-weight: bold;
    margin-bottom: 10px;
    text-align: center;
}

.comp-table th, 
.comp-table td {
    padding: 10px 8px;
    border: 1px solid var(--table-border);
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.25);
    vertical-align: top;
    text-align: left;
}

.comp-table thead th {
    font-size: 0.85em;
    background-color: lightgrey;
    text-align: center;
    vertical-align: middle;
    text-transform: uppercase;
    font-weight: bold;
    color: black;
}

.comp-table .princ-col {
    font-size: 0.85em;
    background-color: lightgrey;
    text-align: left; /* Con esto evito que se añada espacio entre palabras antes del salto de línea "empujando" todo a la izda. */
    vertical-align: middle;
    text-size-adjust: auto;
    text-transform: uppercase;
    font-weight: bold;
    color: black;
}

.comp-table tbody tr:nth-child(even) { /* Fondo coloreado en filas alternas para mejorar legibilidad. nth: solo hijos directos (con posición par) de ese contenedor */
    background-color: var(--table-row-alt);
}

.comp-table tbody tr:hover { /* Hover para la versión de escritorio */
    background-color: var(--table-row-hover);
}

.comp-table .spacing-row {
    padding: 6px;
    background-color: transparent;
    border: 1px solid var(--table-border);
}

.comp-table tfoot .table-foot {
    border: 1px solid transparent;
    font-style: italic;
    font-size: 0.9em;
}

@media (prefers-color-scheme: dark) { /* Ajustes para tablas en modo oscuro */
    :root {
    --table-border: #ccc;
    }

    .comp-table {
        border: 1px solid var(--table-border);
    }

    .comp-table th, 
    .comp-table td {
        border: 1px solid var(--table-border);
    }

    .comp-table thead th,
    .comp-table .princ-col {
        background-color: #1e293b;
        color:var(--text-nav);
    }

    .comp-table tbody tr:nth-child(even) { /* Fondo coloreado en filas alternas para mejorar legibilidad */
        background-color: rgba(255, 255, 255, 0.05);
    }

    .comp-table tbody tr:hover { /* Hover para la versión de escritorio */
        background-color: rgba(147, 197, 253, 0.12);
    }
}

/* Scrolls personalizados */

/* Para WebKit (Chrome, Edge, Safari). Generarán advertencia de validador */
::-webkit-scrollbar { /* No aplico selector universal porque webkit ya lo hace por defecto*/
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-thumb {
    background-color: rgba(0, 0, 0, 0.35);
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background-color: rgba(0, 0, 0, 0.55);
}

/* Para Firefox */
* { /* Selector universal para que afecte a todos los elementos con scroll */
    scrollbar-width: thin;
    scrollbar-color: rgba(0, 0, 0, 0.4) transparent;
}

/* Scrolls en modo oscuro. las webkits generarán advertencia de validador */
@media (prefers-color-scheme: dark) {
    ::-webkit-scrollbar-thumb {
        background-color: rgba(255, 255, 255, 0.35);
    }

    ::-webkit-scrollbar-thumb:hover {
        background-color: rgba(255, 255, 255, 0.55);
    }

    * { /* Selector universal para que afecte a todos los elementos con scroll */
        scrollbar-color: rgba(255, 255, 255, 0.4) transparent;
    }
}

/* Estilos para formularios */
form {
    max-width: 600px;
    margin: 0 auto;
}

input[type="text"],
input[type="email"],
select,
textarea {
    width: 100%;
    max-width: 100%;
    padding: 10px;
    font-family: inherit;
    font-size: 1em;
    border: 1px solid #999;
    border-radius: 6px;
}

/* Campos obligatorios inválidos */
input:required:invalid,
select:required:invalid,
textarea:required:invalid {
    border-color: #dc2626;
}

/* Campos obligatorios válidos */
input:required:valid,
select:required:valid,
textarea:required:valid {
    border-color: #16a34a;
}

/* Del focus se encarga el propio navegador, pero lo defino para cumplir con la rúbrica */

/* Transiciones para los campos. Con esto logro que se perciba mejor el cambio visual */
input,
select,
textarea {
    transition:
        border-color 0.2s ease,
        box-shadow 0.3s ease,
        background-color 0.2s ease;
}

/* Foco, general */
input:focus,
select:focus,
textarea:focus {
    outline: none;
    border-color: var(--focus-color);

    /* Antes, aquí aplicaba un cambio de fondo pero, por especificidad, :focus-visible lo sobreescribía más adelante */
}

/* Regla específica de select al hacer foco también con ratón */
select:focus {
    box-shadow: 0 0 0 4px var(--focus-ring-light);
}

/* Regla específica para navegación con teclado */
input:focus-visible,
textarea:focus-visible {
    box-shadow: 0 0 0 4px var(--focus-ring-light);
}

/* Regla específica de select para navegación con teclado. Al parecer, select se renderiza de forma distinta */
select:focus-visible {
    box-shadow: 0 0 0 4px var(--focus-ring-light);

    /* Previamente aquí había otra regla para el fondo, y funcionaba bien, pero al llegar al foco mediante teclado y desplegar el menú mediante el ratón, el fondo cambiaba a blanco. Esto era casi imperceptible en modo claro, aunque no era el comportamiento deseado, pero en modo oscuro resultaba ilegible */
}

input[type="checkbox"],
input[type="radio"] {
    margin-right: 6px;
}

input[type="submit"],
input[type="reset"] {
    margin-right: 10px;
}

.consent-text {
    font-weight: normal;
}

@media (prefers-color-scheme: dark) {
    input[type="text"],
    input[type="email"],
    select,
    textarea {
        background-color: #0f172a; /* Azul muy oscuro */
        color: #f8fafc; /* Texto claro */
        border-color: #334155;
    }

    input::placeholder,
    textarea::placeholder {
        color: #94a3b8; /* Placeholder suave */
        opacity: 1; /* Importante en Firefox */
    }

    input:required:invalid,
    select:required:invalid,
    textarea:required:invalid {
        border-color: #f87171;
    }

    input:required:valid,
    select:required:valid,
    textarea:required:valid {
        border-color: #22c55e;
    }

     /* Focus modo oscuro */
    input:focus,
    select:focus,
    textarea:focus {
        outline: none;
        border-color: var(--focus-color);

        /* Aquí tuve el mismo problema que en el modo claro cuando aplicaba un cambio de fondo */
    }

    /* Regla específica para navegación con ratón en modo oscuro */
    select:focus {
        box-shadow: 0 0 0 4px var(--focus-ring-dark);
    }

    /* Regla específica para navegación con teclado en modo oscuro */
    input:focus-visible,
    textarea:focus-visible {
        box-shadow: 0 0 0 4px var(--focus-ring-dark);
    }
 
    select:focus-visible {
        box-shadow: 0 0 0 4px var(--focus-ring-dark);
    }

}

label {
    font-weight: bold;
    display: inline-block;  
    margin-bottom: 4px;
}

fieldset {
    border: 1px solid #999;
    border-radius: 8px;
    padding: 10px 12px;
}

fieldset label { /* Esto mejora la pulsación en p. táctiles */
    display: block;
    margin-bottom: 6px;
}

legend {
    font-weight: bold;
    padding: 0 6px;
}

@media (hover: none) and (pointer: coarse) {
    body {
        overflow-y: auto;
    }
}

@media (max-width: 1150px) { /* Esto está especialmente pensado para la página de la tabla, en la qe el breakpoint de 900 (más abajo) hacía que desapareciera el aside y hubiera que hacer scroll. De esta forma se aplica el modo "pantalla estrecha" antes al reducir el tamaño de la ventana en escritorio */
    body {
        display: flex;
        flex-direction: column;
        gap: 20px;
        width: 100%;
    }

    /* En pantallas pequeñas, los elementos se muestran en el orden deseado cuando se cambie de grid a flex */
    header  { order: 1; }
    .nav1   { order: 2; }
    main    { order: 3; }
    .aside1 { order: 4; }
    footer  { order: 5; }

    /* Tabla */
    .comp-table {
        font-size: 0.8em;
    }

    .comp-table th,
    .comp-table td {
        padding: 14px 10px;
    }

    .comp-table caption {
        font-size: 0.9em;
    }

    .nav1 {
        display: flex;
        flex-flow: row nowrap;
        justify-content: flex-start;
        align-items: center;
        gap: 10px;
        overflow: auto hidden;
        width: 100%;
        padding: 5px 10px;
    }

    .nav1 a {
        flex: 0 0 auto;
        white-space: nowrap;
    }

    .aside1 {
        display: flex;
        flex-direction: column;
        align-items: center;
        width: 100%;
        max-width: 100%;
        margin: 0 auto;
    }
    .aside1 ul {
        display: flex;
        
        /* flex-direction: row;
        flex-wrap: nowrap; */

        flex-flow: nowrap;
        gap: 12px;
        overflow-x: auto;
        justify-content: center;
        width: 100%;
        padding: 5px 0;
    }

    .aside1 li {
        flex: 0 0 auto;
        white-space: nowrap;
    }
}

@media (max-width: 900px) { /* Esto funciona con pantallas pequeñas y ventanas pequeñas, pero no al girar el móvil, por ejemplo, y ponerlo en modo landscape. Se soluciona más abajo (línea 733). Este breakpoint está pensado para mejorar la experiencia táctil; complementa al anterior */

    /* Layout */
    body {
        display: flex; /* Con esto me aseguro de que en pantalla o ventana pequeñas, deje de usarse grid */
        flex-direction: column; 
        grid-template-columns: 1fr;
        grid-template-rows: auto auto auto auto auto;
        gap: 15px;
        width: 100%; /* Me aseguro de que en pantalla pequeña no haga falta hacer zoom "hacia atrás" innecesario */
    }

    .nav1 {
        /* flex-direction: row;
        flex-wrap: nowrap; */
        flex-flow: row nowrap; /* Fuerzo a que los botones estén en una sola fila en caso de que se cumpla el media query */
        justify-content: flex-start; /* Previamente lo tenía como "center", y se me cortaban "botones" hacia la izquierda en móviles */
        align-items: center;
        gap: 10px;

        /* overflow-x: auto;
        overflow-y: hidden; */

        overflow: auto hidden;
        width: 100%;
        padding: 5px 10px; /* Un poco de padding para que no se pegue el contenido a los bordes */
        scrollbar-width: thin; /* Si los botones no caben, saldrá un bonito scroll */
    }

    .nav1 a {
        flex: 0 0 auto;
        white-space: nowrap;
    }

    .nav1 a.active { /* Resalto el botón activo aún más en móviles, pero no en pantallas grandes */
        box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.4) inset; /* comencé usando outline pero, al no formar parte del box model, no se adaptaba bien al tamaño del botón */
    }
    
    .aside1 {
        display: flex;
        flex-direction: column;
        align-items: center;
        width: 100%;
        max-width: 100%;
        margin: 0 auto;
    }

    .aside1 ul {
        display: flex;
        
        /* flex-direction: row;
        flex-wrap: nowrap; */

        flex-flow: nowrap;
        gap: 12px;
        overflow-x: auto;
        justify-content: center;
        width: 100%;
        padding: 5px 0;
    }

    .aside1 li {
        flex: 0 0 auto;
        white-space: nowrap;
    }

    footer {
        flex-direction: column;
        gap: 10px;
        text-align: center;
    }

    .foot-icons {
        justify-content: center;
    }

    /* Mapa de imagenes de index desactivado en pantallas pequeñas */
    main > img[usemap] {
        display: none;
    }

    /* Formulario */
    form {
        padding: 0 5px;
    }

    input[type="submit"],
    input[type="reset"] {
        width: 100%;
        margin-bottom: 10px;
    }
}

@media (max-width: 1024px) and (orientation: landscape) { /* Para pantallas pequeñas al ponerlas en horizontal. No es redundante con los anteriores, puesto que puede ser que en móviles se superen la densidad de 1024px en horizontal, pero la pantalla siga siendo pequeña. Tal como están ordenadas las reglas, tiene sentido */
    body {
        overflow-y: auto;
        display: flex;
        flex-direction: column;
        gap: 15px;
        width: 100%;
    }

    header  { order: 1; }
    .nav1   { order: 2; }
    main    { order: 3; }
    .aside1 { order: 4; }
    footer  { order: 5; }
}

/* En la rúbrica se establece que "el menú de navegación aparecerá en una sola línea". El estilo aplicado es flex, pero el aspecto es de columna. En el modo "pantalla estrecha" se muestra en una línea en la parte superior. Esto es deliberado, no una omisión, y considero que el criterio se está cumpliendo */

/* Utilizo, también una única hoja de estilos común para todas las páginas. Remarco esto porque, según está redactada la rúbrica, puede interpretarse que se requiere una hoja de estilos por cada fichero */

/* Los media queries referentes al modo oscuro se han añadido justo después de los estilos generales afectados, para facilitar su localización. No utilizaría este enfoque en proyectos colaborativos, y los pondría todos al final, con las debidas anotaciones */

/* Se han tenido en cuenta las recomendaciones de accesibilidad WCAG 2.1 para contraste de colores en modo oscuro y claro y la facilidad de uso en pantallas táctiles, con áreas de toque grandes y guías visuales claras */

/* Estoy usando por primera vez Stylelint (después del validador de W3c) para validar este código CSS, por lo que aún me estoy acostumbrando a sus recomendaciones y reglas. He aplicado las recomendaciones en cuanto a líneas en blanco y algunas para la longitud de los colores, pero he descartado la sintaxis "moderna" de colores en favor de la compatibilidad con navegadores más antiguos, por parecerme buena práctica (por este mismo motivo desoigo la recomendación de Stylelint de usar porcentajes en lugar de decimales para el alfa de los colores). También he eliminado cosas como "0px" en favor de "0" ya que, al ser 0, no es necesaria la unidad */

/* En los media queries también me decanto por la compatibilidad, no usando la sintaxis moderna de rango que aconseja Stylelint. No creo que nadie vaya a abrir esto en Netscape, pero me parece una buena práctica, por el momento */

/* Adjunto el archivo de configuración de Stylelint que he usado */